<!-- File: /public/slide-accordion.html -->
<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Questions to Ask – Slide Layout</title>
<style>
  :root{
    --bg:#ffffff; --ink:#111827; --line:#d1d5db;
    --panel:#dfdfdf; --panel-hover:#d6d6d6; --ring:0 0 0 3px rgba(59,130,246,.35);
  }
  *{box-sizing:border-box}
  body{margin:0;background:var(--bg);color:var(--ink);font:20px/1.6 system-ui,-apple-system,Segoe UI,Roboto,Inter,Arial}
  .container{max-width:1100px;margin:42px auto;padding:0 20px}
  .layout{display:grid;grid-template-columns:1fr 380px;gap:42px;align-items:start}

  /* Toolbar */
  .toolbar{display:flex;gap:8px;align-items:center;margin:0 0 12px 0}
  .tool-btn{
    padding:8px 12px;border-radius:8px;border:1px solid var(--line);
    background:#f5f6f8;color:#111;font-weight:700;cursor:pointer;
    transition:transform .06s ease, background-color .15s ease;
  }
  .tool-btn:hover{background:#eef1f5;transform:translateY(-1px)}
  .tool-btn:focus-visible{outline:none;box-shadow:var(--ring)}

  /* LEFT */
  .stack{display:flex;flex-direction:column;gap:14px;min-width:300px}
  .acc-header{
    width:100%;display:flex;align-items:center;gap:10px;
    padding:18px 20px 18px 46px;border:1px solid var(--line);
    background:var(--panel);border-radius:6px;font-weight:800;cursor:pointer;
    text-align:left;position:relative;transition:background-color .15s,transform .06s;
    font-size:22px;
  }
  .acc-header::before{content:"\2794";position:absolute;left:14px;font-size:20px;color:#000;opacity:.8;transform:rotate(180deg)}
  .acc-header:hover{background:var(--panel-hover);transform:translateY(-1px)}
  .acc-header:focus-visible{outline:none;box-shadow:var(--ring)}
  .acc-header .cat-icon{width:26px;height:26px;flex:0 0 26px;}
  .acc-header .cat-icon svg{width:100%;height:100%;stroke:#000;fill:none;stroke-linecap:round;stroke-linejoin:round;stroke-width:2.8}

  .acc-panel{margin:8px 0 12px 24px}
  .q-list{list-style:square;margin:8px 0 0 22px;padding:0;font-size:20px;line-height:1.7}
  .q-list li{margin:12px 0}
  .q-list li::marker{color:#111;font-size:1.05em}
  .acc-panel[hidden]{display:none}

  /* RIGHT (match screenshot) */
  .side{display:flex;flex-direction:column;gap:14px}
  .survey-link{
    display:block; border:1px solid var(--line); background:#fff;
    padding:12px 14px; border-radius:10px; text-decoration:none; color:#111;
    box-shadow:0 2px 0 rgba(0,0,0,.06) inset;
  }
  .cta{
    display:inline-block;text-decoration:none;color:#fff;font-weight:700;font-size:18px;
    padding:14px 18px;border-radius:10px;min-width:280px;text-align:center;
    background:linear-gradient(180deg,#6ea2cf,#588fbe);
    box-shadow:0 4px 0 0 rgba(0,0,0,.12) inset,0 8px 24px rgba(0,0,0,.18);
    border:3px solid #fff;outline:1px solid #c7d9ea;text-shadow:0 1px 0 rgba(0,0,0,.2);
    transition:transform .06s ease,filter .15s ease;
  }
  .cta:hover{filter:brightness(1.05);transform:translateY(-1px)}
  .cta:focus-visible{outline:none;box-shadow:var(--ring)}

  .pic-wrap{width:100%;max-width:340px;margin-top:6px}
  .pic{width:100%;height:auto;border:2px solid #c9ced6;border-radius:10px;display:block}

  @media (max-width:760px){
    .layout{grid-template-columns:1fr;gap:28px}
    .side .cta{width:100%;min-width:unset}
  }
</style>
</head>
<body>
<a id="page-top"></a>

<main class="container" aria-label="Slide-like layout">
  <section class="layout">
    <div>
      <div class="toolbar" role="group" aria-label="Expand or collapse all">
        <button id="expandAllBtn"  class="tool-btn" type="button">Expand all</button>
        <button id="collapseAllBtn" class="tool-btn" type="button">Collapse all</button>
      </div>
      <div id="stack" class="stack" aria-label="Categories"></div>
    </div>

    <aside class="side" aria-label="Actions">
      <!-- Go back to the survey popup on the landing page -->
      <a class="survey-link" href="https://ilonafridman.github.io/care-pathway-landing.html#survey">Go back to the survey</a>

      <!-- Download PDF of this page -->
      <button id="downloadPdfBtn" class="cta" type="button">Download PDF</button>

      <!-- Online resources button -->
      <a class="cta" href="https://ilonafridman.github.io/diagnosis/diagnosisresources.html">Online resources to explore</a>

      <div class="pic-wrap">
        <img class="pic"
             src="https://ilonafridman.github.io/diagnosis/Patient%20and%20a%20doctor.jpg"
             alt="Patient speaking with a doctor" />
      </div>
    </aside>
  </section>
</main>

<script>
  const DATA = [
    { title: 'Diagnosis and Testing', questions: [
      'How was this diagnosis made?','What do “grade”, “stage”, “margin” mean?','What is my type of breast cancer?',
      'Are there any additional tests or biopsies I need to confirm the diagnosis or understand it better?',
      'Is it necessary to test for tumor markers in my case?','Should I be tested for estrogen receptors?',
      'Do I need to do genetic testing?','How quickly does my cancer grow?','Am I at an increased risk of ovarian cancer or other types of cancer?'
    ]},
    { title: 'Time and Urgency', questions: [
      'How much time do I have to decide about my treatment?','How long does it take to hear back after I complete my tests?'
    ]},
    { title: 'Coordination of your Care', questions: [
      'Who will be part of my care team, and what is each person’s role?','Which doctors should I be seeing and when?',
      'Is there a patient navigator or social worker I can talk to?','Who else should I talk to?','What should be my next step?'
    ]},
    { title: 'Access to Information', questions: [
      'How could I access or use “my chart”?','Where do I get additional information on breast cancer?'
    ]},
    { title: 'Support and Coping', questions: [
      'Are there support groups or counseling services you recommend?','What should I tell my family and friends about breast cancer?',
      'How will cancer treatment affect my work, life, and other activities?'
    ]},
    { title: 'General Understanding', questions: [
      'How did I get cancer?','What are the risks to my family because of my diagnosis?','Do I need a reproductive specialist’s consultation?'
    ]},
    { title: 'Clinical Trials and Second Opinions', questions: [
      'What are the clinical trials available to me?','I would like to know more about clinical trials, whom should I ask?',
      'What expenses associated with a clinical trial may not be covered by insurance?','When should I search for a second opinion?'
    ]}
  ];

  let singleOpen = true;

  const Icons = {
    hourglass: () => `<svg viewBox="0 0 24 24" aria-hidden="true"><path d="M6 3h12M6 21h12" /><path d="M7 3c0 5 5 5 5 9s-5 4-5 9M17 3c0 5-5 5-5 9s5 4 5 9" /><path d="M9 7h6M9 17h6" /></svg>`,
    hug: () => `<svg viewBox="0 0 24 24" aria-hidden="true"><circle cx="8" cy="6.5" r="2.3" /><circle cx="16" cy="6.5" r="2.3" /><path d="M3.5 18c2-4 5-5 8.5-5s6.5 1 8.5 5" /><path d="M6 14l2.5 2.5M18 14l-2.5 2.5" /></svg>`,
    microscope: () => `<svg viewBox="0 0 24 24" aria-hidden="true"><path d="M8 4l3 3" /><rect x="9.5" y="5.5" width="3" height="6" rx="1" /><path d="M7 13h10" /><path d="M5 19h14M7 13c-2 1-3 3-3 6" /></svg>`,
    stethoscope: () => `<svg viewBox="0 0 24 24" aria-hidden="true"><path d="M6 3v4a4 4 0 0 0 8 0V3" /><path d="M10 11v2a5 5 0 0 0 10 0v-1" /><circle cx="20" cy="12" r="1.8" /></svg>`,
    book: () => `<svg viewBox="0 0 24 24" aria-hidden="true"><path d="M4 5h10a3 3 0 0 1 3 3v11H7a3 3 0 0 0-3 3z" /><path d="M7 5v17" /><path d="M11 9h4M11 12h4" /></svg>`,
    bulb: () => `<svg viewBox="0 0 24 24" aria-hidden="true"><path d="M12 3a7 7 0 0 1 5 11c-1 1-2 2-2 3H9c0-1-1-2-2-3A7 7 0 0 1 12 3z" /><path d="M9 20h6M10 22h4" /></svg>`,
    beaker: () => `<svg viewBox="0 0 24 24" aria-hidden="true"><path d="M8 3h8M10 3v6L5 21h14l-5-12V3" /><path d="M7 16h10" /></svg>`
  };

  function iconFor(title){
    const t = title.toLowerCase();
    if (t.includes('time')) return Icons.hourglass();
    if (t.includes('support') || t.includes('coping')) return Icons.hug();
    if (t.includes('diagnosis') || t.includes('test')) return Icons.microscope();
    if (t.includes('coordination') || t.includes('care')) return Icons.stethoscope();
    if (t.includes('access') || t.includes('information')) return Icons.book();
    if (t.includes('general')) return Icons.bulb();
    if (t.includes('trial') || t.includes('opinion')) return Icons.beaker();
    return Icons.bulb();
  }

  (function render(){
    const stack = document.getElementById('stack');
    DATA.forEach((cat, idx) => {
      const id = `panel-${idx}`;
      const btn = document.createElement('button');
      btn.className = 'acc-header'; btn.type = 'button'; btn.id = `btn-${idx}`;
      btn.setAttribute('aria-expanded','false'); btn.setAttribute('aria-controls', id);

      const iconWrap = document.createElement('span'); iconWrap.className = 'cat-icon';
      iconWrap.innerHTML = iconFor(cat.title);

      const text = document.createElement('span'); text.textContent = ` ${cat.title}`;

      const panel = document.createElement('div'); panel.className = 'acc-panel';
      panel.id = id; panel.setAttribute('role','region'); panel.setAttribute('aria-labelledby', btn.id); panel.hidden = true;

      const ul = document.createElement('ul'); ul.className = 'q-list';
      cat.questions.forEach(q => { const li = document.createElement('li'); li.textContent = q; ul.appendChild(li); });
      panel.appendChild(ul);

      btn.appendChild(iconWrap); btn.appendChild(text);
      btn.addEventListener('click', () => togglePanel(idx));
      stack.appendChild(btn); stack.appendChild(panel);
    });

    document.getElementById('expandAllBtn').addEventListener('click', expandAll);
    document.getElementById('collapseAllBtn').addEventListener('click', collapseAll);
    document.getElementById('downloadPdfBtn').addEventListener('click', downloadPageAsPDF);
  })();

  function togglePanel(i){
    const btn = document.getElementById(`btn-${i}`);
    const panel = document.getElementById(`panel-${i}`);
    const open = btn.getAttribute('aria-expanded') === 'true';
    if (singleOpen) collapseAll();
    btn.setAttribute('aria-expanded', open ? 'false' : 'true');
    panel.hidden = open;
    if (!open) panel.scrollIntoView({behavior:'smooth', block:'nearest'});
  }
  function expandAll(){
    singleOpen = false;
    DATA.forEach((_, idx) => {
      document.getElementById(`btn-${idx}`).setAttribute('aria-expanded','true');
      document.getElementById(`panel-${idx}`).hidden = false;
    });
    document.getElementById('stack').scrollIntoView({behavior:'smooth', block:'nearest'});
  }
  function collapseAll(){
    DATA.forEach((_, idx) => {
      document.getElementById(`btn-${idx}`).setAttribute('aria-expanded','false');
      document.getElementById(`panel-${idx}`).hidden = true;
    });
    singleOpen = true;
  }

  // PDF (whole page)
  async function downloadPageAsPDF(){
    const el = document.querySelector('main');
    await exportElementToPDF(el, 'questions-page.pdf');
  }
  async function exportElementToPDF(element, filename){
    await document.fonts?.ready?.catch(()=>{});
    const canvas = await html2canvas(element, { backgroundColor:'#ffffff', scale:Math.min(2, window.devicePixelRatio||1.5) });
    const img = canvas.toDataURL('image/png');
    const pdf = new window.jspdf.jsPDF({ unit:'mm', format:'a4', compress:true });
    const pageW = pdf.internal.pageSize.getWidth(), pageH = pdf.internal.pageSize.getHeight();
    const imgW = pageW, imgH = canvas.height * (imgW / canvas.width);
    if (imgH <= pageH){ pdf.addImage(img,'PNG',0,0,imgW,imgH); }
    else{
      let y=0, pxPerMm = canvas.width / imgW, pageHPx = pageH * pxPerMm;
      while (y < canvas.height){
        const c = document.createElement('canvas'); c.width = canvas.width; c.height = Math.min(pageHPx, canvas.height - y);
        c.getContext('2d').drawImage(canvas,0,y,canvas.width,c.height,0,0,canvas.width,c.height);
        const data = c.toDataURL('image/png');
        if (y) pdf.addPage();
        pdf.addImage(data,'PNG',0,0,imgW,pageH);
        y += pageHPx;
      }
    }
    pdf.save(filename);
  }
</script>

<!-- Deps for client-side PDF -->
<script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/jspdf@2.5.1/dist/jspdf.umd.min.js" crossorigin="anonymous"></script>
</body>
</html>
